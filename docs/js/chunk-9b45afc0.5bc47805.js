(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9b45afc0"],{"1c17":function(t,e,r){"use strict";var n=r("3896");r.n(n).a},3896:function(t,e,r){},"43fe":function(t,e,r){"use strict";r.r(e),r("7f7f");var n=r("cebc"),o=r("5880"),s=r("cebe"),a=r.n(s),u={data:function(){return{currentTask:{},isShow:!1,hotWords:[],ruleForm:{name:"手机",url:"https://list.jd.com/list.html?cat=9987,653,655&page=1&sort=sort_commentcount_desc&trans=1&JL=4_5_0#J_main"},rules:{name:[{validator:function(t,e,r){""===e?r(new Error("请输入名称")):r()},trigger:"blur"}],url:[{validator:function(t,e,r){if(!e)return r(new Error("不能为空"));r()},trigger:"blur"}]}}},created:function(){this.getHotWords()},watch:{de8ugtoken:function(){sessionStorage.setItem("de8ugtoken",this.de8ugtoken),this.getHotWords()}},computed:Object(n.a)({},Object(o.mapState)(["de8ugtoken"])),methods:{getHotWords:function(){var t=this;a.a.get("/api/v1/status",{headers:{Authorization:"Token ".concat(this.de8ugtoken)},params:{token:"hot"}}).then(function(e){t.hotWords=e.data}).catch(function(t){})},createTask:function(){var t=this;a.a.post("/api/v1/task",{url:this.ruleForm.url,name:this.ruleForm.name},{headers:{Authorization:"Token "+this.$store.state.de8ugtoken}}).then(function(e){0==e.data.status?(t.isShow=!0,t.currentTask.token=e.data.token,t.currentTask.count=e.data.sku_list.length,sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("token-count",t.currentTask.count),t.$message({message:"恭喜你，"+e.data.statusText,type:"success"})):(t.isShow=!1,t.$message({message:e.data.statusText,type:"error"}))}).catch(function(t){})},start:function(){this.$store.dispatch("changeStep",2);var t=this.$router.history.current.path;this.$router.push({path:t,query:{changeStep:2,token:this.currentTask.token}})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){return!!t&&void e.createTask()})},resetForm:function(t){this.$refs[t].resetFields()}}},i=(r("1c17"),r("2877")),c=Object(i.a)(u,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"task"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:18,offset:3}},[r("h3",[t._v("请从页面底部获取[邀请码]"+t._s(t.de8ugtoken)+"，开启试用")])])],1),t.de8ugtoken?r("el-row",{staticClass:"hot"},[t._v("热门搜索：\n        "),t._l(t.hotWords.slice(0,10),function(e){return r("a",{key:e.id,staticClass:"hot-a",attrs:{href:"/?changeStep=3&token="+e.token}},[t._v(t._s(e.words))])})],2):t._e(),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"url",prop:"url"}},[r("el-input",{model:{value:t.ruleForm.url,callback:function(e){t.$set(t.ruleForm,"url",e)},expression:"ruleForm.url"}})],1),r("div",[t._v("提示：\n        打开"),r("a",{attrs:{href:"https://www.jd.com/allSort.aspx",target:"_blank"}},[t._v("京东的全部商品")]),t._v("，查看具体某一类商品链接，粘贴到url即可\n      ")]),t.de8ugtoken?r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")]),r("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1):t._e()],1),t.isShow?r("div",{staticClass:"show"},[r("p",[t._v("\n      任务创建成功，共"+t._s(t.currentTask.count)+"个子任务，\n      ")]),r("p",[t._v("\n        token:"+t._s(t.currentTask.token)+"\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:t.start}},[t._v("开始爬取")])],1):t._e()],1)},[],!1,null,"0b74bd09",null);e.default=c.exports},"7f7f":function(t,e,r){var n=r("86cc").f,o=Function.prototype,s=/^\s*function ([^ (]*)/;"name"in o||r("9e1e")&&n(o,"name",{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})}}]);